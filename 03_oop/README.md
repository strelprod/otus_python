# Scoring API
## Структура проекта
Директория содержит модули для реализации сервиса скоринга, реализуемого как http-сервер, который принимает только POST-запросы.

* Пакет **api.py** - выполняет задачу обработки http-запросов
* Пакет **scoring.py** - функции скоринга клиентов
* Пакет **test.py** - функциональные тесты для **api.py**

### Запросы
Структура запроса
```json
{"account": "<имя компании партнера>", "login": "<имя пользователя>", "method": "<имя метода>", "token": "<аутентификационный токен>", "arguments": {<словарь с аргументами вызываемого метода>}}
```

**Аргументы:**
* account - строĸа, опционально, может быть пустым
* login - строĸа, обязательно, может быть пустым
* method - строĸа, обязательно, может быть пустым
* token - строĸа, обязательно, может быть пустым
* arguments - словарь (объеĸт в терминах j son), обязательно, может быть пустым

Структура ответа
```json
{"code": <числовой код>, "response": {<ответ вызываемого метода>}}
```

Обрабатываемые методы:
* online_score - подсчет очков для клиента на основе данных о нем
* clients_interests - генерация интересов для каждого переданного id клиента

## Запуск http-сервера
Из корня директории 03_oop запуск:
```sh
$ python api.py
```

Опциональные параметры:
* ```--port``` - порт, который слушает сервер (по умолчанию: 8080)
* ```--log``` - файл для записи логов (по умолчанию: None)


## Запуск тестов
Из корня директории 03_oop запуск:
```sh
$ python -m unittest discover
```